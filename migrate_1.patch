Subject: [PATCH] migrate 1
---
Index: catalog/migrations/0001_initial.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/catalog/migrations/0001_initial.py b/catalog/migrations/0001_initial.py
new file mode 100644
--- /dev/null	(revision fdaadd2f470d64d512a3c41c6e53904fa1e4d101)
+++ b/catalog/migrations/0001_initial.py	(revision fdaadd2f470d64d512a3c41c6e53904fa1e4d101)
@@ -0,0 +1,46 @@
+# Generated by Django 5.0.2 on 2024-03-17 18:23
+
+import django.db.models.deletion
+from django.db import migrations, models
+
+
+class Migration(migrations.Migration):
+
+    initial = True
+
+    dependencies = [
+    ]
+
+    operations = [
+        migrations.CreateModel(
+            name='Category',
+            fields=[
+                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('name', models.CharField(max_length=100, verbose_name='Наименование')),
+                ('description', models.CharField(max_length=100, verbose_name='Описание')),
+            ],
+            options={
+                'verbose_name': 'товар',
+                'verbose_name_plural': 'товары',
+                'ordering': ('name',),
+            },
+        ),
+        migrations.CreateModel(
+            name='Product',
+            fields=[
+                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('name', models.CharField(max_length=100, verbose_name='Наименование')),
+                ('description', models.CharField(max_length=100, verbose_name='Описание')),
+                ('Image', models.ImageField(blank=True, null=True, upload_to='preview/', verbose_name='Изображение')),
+                ('purchase_price', models.IntegerField(max_length=100, verbose_name='Цена за покупку')),
+                ('created_at', models.DateTimeField(max_length=100, verbose_name='Дата создания')),
+                ('updated_at', models.DateTimeField(max_length=100, verbose_name='Дата последнего изменения')),
+                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='catalog.category', verbose_name='Категория')),
+            ],
+            options={
+                'verbose_name': 'товар',
+                'verbose_name_plural': 'товары',
+                'ordering': ('name',),
+            },
+        ),
+    ]
Index: catalog/models.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/catalog/models.py b/catalog/models.py
--- a/catalog/models.py	(revision 1e16c4ad73fccbd31f12a1382842bbd42efc2f4d)
+++ b/catalog/models.py	(revision fdaadd2f470d64d512a3c41c6e53904fa1e4d101)
@@ -1,3 +1,34 @@
 from django.db import models
 
-# Create your models here.
+NULLABLE = {'blank': True, 'null': True}
+
+
+class Category(models.Model):
+    name = models.CharField(max_length=100, verbose_name='Наименование')
+    description = models.CharField(max_length=100, verbose_name='Описание')
+
+    def __str__(self):
+        return f'{self.name} {self.description}'
+
+    class Meta:
+        verbose_name = 'товар'
+        verbose_name_plural = 'товары'
+        ordering = ('name',)
+
+
+class Product(models.Model):
+    name = models.CharField(max_length=100, verbose_name='Наименование')
+    description = models.CharField(max_length=100, verbose_name='Описание')
+    Image = models.ImageField(upload_to='preview/', verbose_name='Изображение', **NULLABLE)
+    category = models.ForeignKey(Category, on_delete=models.CASCADE, verbose_name='Категория')
+    purchase_price = models.IntegerField(max_length=100, verbose_name='Цена за покупку')
+    created_at = models.DateTimeField(max_length=100, verbose_name='Дата создания')
+    updated_at = models.DateTimeField(max_length=100, verbose_name='Дата последнего изменения')
+
+    def __str__(self):
+        return f'{self.name} {self.description}'
+
+    class Meta:
+        verbose_name = 'товар'
+        verbose_name_plural = 'товары'
+        ordering = ('name',)
Index: catalog/urls.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/catalog/urls.py b/catalog/urls.py
--- a/catalog/urls.py	(revision 1e16c4ad73fccbd31f12a1382842bbd42efc2f4d)
+++ b/catalog/urls.py	(revision fdaadd2f470d64d512a3c41c6e53904fa1e4d101)
@@ -1,3 +1,5 @@
+from django.conf import settings
+from django.conf.urls.static import static
 from django.urls import path
 
 from catalog.views import index, contacts
@@ -5,4 +7,4 @@
 urlpatterns = [
     path('', index),
     path('contacts/', contacts),
-]
+] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
Index: config/settings.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/config/settings.py b/config/settings.py
--- a/config/settings.py	(revision 1e16c4ad73fccbd31f12a1382842bbd42efc2f4d)
+++ b/config/settings.py	(revision fdaadd2f470d64d512a3c41c6e53904fa1e4d101)
@@ -76,8 +76,11 @@
 
 DATABASES = {
     'default': {
-        'ENGINE': 'django.db.backends.sqlite3',
-        'NAME': BASE_DIR / 'db.sqlite3',
+        'ENGINE': 'django.db.backends.postgresql_psycopg2',
+        'NAME': 'q',
+        'USER': 'postgres',
+        'PASSWORD': '1234',
+        'HOST': 'localhost'
     }
 }
 
@@ -126,3 +129,6 @@
 # https://docs.djangoproject.com/en/5.0/ref/settings/#default-auto-field
 
 DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'
+
+MEDIA_URL = '/media/'
+MEDIA_ROOT = BASE_DIR / 'media'
